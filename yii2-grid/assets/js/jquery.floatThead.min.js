// @preserve jQuery.floatThead 1.2.9dev - http://mkoryak.github.io/floatThead/ - Copyright (c) 2012 - 2015 Misha Koryak
// @license MIT
!function(t){function e(t,e,o){if(8==l){var n=f.width(),r=i.debounce(function(){var t=f.width();n!=t&&(n=t,o())},t);f.on(e,r)}else f.on(e,i.debounce(o,t))}function o(t){window.console&&window.console&&window.console.log&&window.console.log(t)}function n(){var e=t('<div style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-200px;left:-200px;"><div style="height:100px;width:100%"></div>');t("body").append(e);var o=e.innerWidth(),n=t("div",e).innerWidth();return e.remove(),o-n}function r(t){if(t.dataTableSettings)for(var e=0;e<t.dataTableSettings.length;e++){var o=t.dataTableSettings[e].nTable;if(t[0]==o)return!0}return!1}t.floatThead=t.floatThead||{},t.floatThead.defaults={cellTag:null,headerCellSelector:"tr:first>th:visible",zIndex:1001,debounceResizeMs:10,useAbsolutePositioning:!0,scrollingTop:0,scrollingBottom:0,scrollContainer:function(){return t([])},getSizingRow:function(t){return t.find("tbody tr:visible:first>*:visible")},floatTableClass:"floatThead-table",floatWrapperClass:"floatThead-wrapper",floatContainerClass:"floatThead-container",copyTableClass:!0,debug:!1};var i=window._,l=function(){for(var t=3,e=document.createElement("b"),o=e.all||[];t=1+t,e.innerHTML="<!--[if gt IE "+t+"]><i><![endif]-->",o[0];);return t>4?t:document.documentMode}(),a=null,s=function(){if(l)return!1;var e=t("<table><colgroup><col></colgroup><tbody><tr><td style='width:10px'></td></tbody></table>");t("body").append(e);var o=e.find("col").width();return e.remove(),0==o},f=t(window);t.fn.floatThead=function(d){if(d=d||{},!i&&(i=window._||t.floatThead._,!i))throw new Error("jquery.floatThead-slim.js requires underscore. You should use the non-lite version since you do not have underscore.");if(8>l)return this;if(null==a&&(a=s(),a&&(document.createElement("fthtr"),document.createElement("fthtd"),document.createElement("fthfoot"))),i.isString(d)){var c=d,u=this;return this.filter("table").each(function(){var e=t(this).data("floatThead-attached");if(e&&i.isFunction(e[c])){var o=e[c]();"undefined"!=typeof o&&(u=o)}}),u}var h=t.extend({},t.floatThead.defaults||{},d);return t.each(d,function(e){e in t.floatThead.defaults||!h.debug||o("jQuery.floatThead: used ["+e+"] key to init plugin, but that param is not an option for the plugin. Valid options are: "+i.keys(t.floatThead.defaults).join(", "))}),this.filter(":not(."+h.floatTableClass+")").each(function(){function o(t){return t+".fth-"+S+".floatTHead"}function s(){var e=0;j.find("tr:visible").each(function(){e+=t(this).outerHeight(!0)}),U.outerHeight(e),X.outerHeight(e)}function d(){var t=x.outerWidth(),e=q.width()||t,o="hidden"!=q.css("overflow-y")?e-H.vertical:e;if(Y.width(o),B){var n=100*t/o;A.css("width",n+"%")}else A.outerWidth(t)}function c(){z=(i.isFunction(h.scrollingTop)?h.scrollingTop(x):h.scrollingTop)||0,L=(i.isFunction(h.scrollingBottom)?h.scrollingBottom(x):h.scrollingBottom)||0}function u(){var e,o;if(G)e=N.find("col").length;else{var n;if(n=null==h.cellTag&&h.headerCellSelector?h.headerCellSelector:"tr:first>"+h.cellTag,i.isNumber(n))return n;o=j.find(n),e=0,o.each(function(){e+=parseInt(t(this).attr("colspan")||1,10)})}if(e!=R){R=e;for(var r=[],l=[],s=[],f=0;e>f;f++)r.push('<th class="floatThead-col"/>'),l.push("<col/>"),s.push("<fthtd style='display:table-cell;height:0;width:auto;'/>");l=l.join(""),r=r.join(""),a&&(s=s.join(""),V.html(s),ee=V.find("fthtd")),U.html(r),X=U.find("th"),G||N.html(l),Z=N.find("col"),P.html(l),te=P.find("col")}return e}function p(){if(!E){if(E=!0,D){var t=x.width(),e=Q.width();t>e&&x.css("minWidth",t)}x.css(re),A.css(re),A.append(j),W.before(K),s()}}function v(){E&&(E=!1,D&&x.width(le),K.detach(),x.prepend(j),x.css(ie),A.css(ie),x.css("minWidth",ae),x.css("minWidth",x.width()))}function g(t){D!=t&&(D=t,Y.css({position:D?"absolute":"fixed"}))}function w(t,e,o,n){return a?o:n?h.getSizingRow(t,e,o):e}function b(){var t,e=u();return function(){var o=w(x,Z,ee,l);if(o.length==e&&e>0){if(!G)for(t=0;e>t;t++)Z.eq(t).css("width","");v();var n=[];for(t=0;e>t;t++)n[t]=o.get(t).offsetWidth;for(t=0;e>t;t++)te.eq(t).width(n[t]),Z.eq(t).width(n[t]);p()}else A.append(j),x.css(ie),A.css(ie),s()}}function T(t){var e=q.css("border-"+t+"-width"),o=0;return e&&~e.indexOf("px")&&(o=parseInt(e,10)),o}function y(){var t,e=q.scrollTop(),o=0,n=O?F.outerHeight(!0):0,r=$?n:-n,i=Y.height(),l=x.offset(),s=0;if(B){var d=q.offset();o=l.top-d.top+e,O&&$&&(o+=n),o-=T("top"),s=T("left")}else t=l.top-z-i+L+H.horizontal;var c=f.scrollTop(),u=f.scrollLeft(),h=q.scrollLeft();return e=q.scrollTop(),function(d){var w=x[0].offsetWidth<=0&&x[0].offsetHeight<=0;if(!w&&J)return J=!1,setTimeout(function(){x.trigger("reflow")},1),null;if(w&&(J=!0,!D))return null;if("windowScroll"==d?(c=f.scrollTop(),u=f.scrollLeft()):"containerScroll"==d?(e=q.scrollTop(),h=q.scrollLeft()):"init"!=d&&(c=f.scrollTop(),u=f.scrollLeft(),e=q.scrollTop(),h=q.scrollLeft()),!a||!(0>c||0>u)){if(k)g("windowScrollDone"==d?!0:!1);else if("windowScrollDone"==d)return null;l=x.offset(),O&&$&&(l.top+=n);var b,T,y=x.outerHeight();if(B&&D){if(o>=e){var m=o-e;b=m>0?m:0}else b=M?0:e;T=s}else!B&&D?(c>t+y+r?b=y-i+r:l.top>c+z?(b=0,v()):(b=z+c-l.top+o+($?n:0),p()),T=0):B&&!D?(o>e||e-o>y?(b=l.top-c,v()):(b=l.top+e-c-o,p()),T=l.left+h-u):B||D||(c>t+y+r?b=y+z-c+t+r:l.top>c+z?(b=l.top-c,p()):b=z,T=l.left-u);return{top:b,left:T}}}}function m(){var t=null,e=null,o=null;return function(n,r,i){null==n||t==n.top&&e==n.left||(Y.css({top:n.top,left:n.left}),t=n.top,e=n.left),r&&d(),i&&s();var l=q.scrollLeft();D&&o==l||(Y.scrollLeft(l),o=l)}}function C(){if(q.length){var t=q.width(),e=q.height(),o=x.height(),n=x.width(),r=n>t?I:0,i=o>e?I:0;H.horizontal=n>t-i?I:0,H.vertical=o>e-r?I:0}}var S=i.uniqueId(),x=t(this);if(x.data("floatThead-attached"))return!0;if(!x.is("table"))throw new Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();');var j=x.find("thead:first"),W=x.find("tbody:first");if(0==j.length)throw new Error("jQuery.floatThead must be run on a table that contains a <thead> element");var z,L,E=!1,H={vertical:0,horizontal:0},I=n(),R=0,q=h.scrollContainer(x)||t([]),D=h.useAbsolutePositioning;null==D&&(D=h.scrollContainer(x).length),D||(E=!0);var F=x.find("caption"),O=1==F.length;if(O)var $="top"===(F.css("caption-side")||F.attr("align")||"top");var _=t('<fthfoot style="display:table-footer-group;border-spacing:0;height:0;border-collapse:collapse;"/>'),B=q.length>0,M=!1,Q=t([]),k=9>=l&&!B&&D,A=t("<table/>"),P=t("<colgroup/>"),N=x.find("colgroup:first"),G=!0;0==N.length&&(N=t("<colgroup/>"),G=!1);var V=t('<fthrow style="display:table-row;border-spacing:0;height:0;border-collapse:collapse"/>'),Y=t('<div style="overflow: hidden;"></div>'),J=!1,K=t("<thead/>"),U=t('<tr class="size-row"/>'),X=t([]),Z=t([]),te=t([]),ee=t([]);K.append(U),x.prepend(N),a&&(_.append(V),x.append(_)),A.append(P),Y.append(A),h.copyTableClass&&A.attr("class",x.attr("class")),A.attr({cellpadding:x.attr("cellpadding"),cellspacing:x.attr("cellspacing"),border:x.attr("border")});var oe=x.css("display");if(A.css({borderCollapse:x.css("borderCollapse"),border:x.css("border"),display:oe}),"none"==oe&&(J=!0),A.addClass(h.floatTableClass).css("margin",0),D){var ne=function(t,e){var o=t.css("position"),n="relative"==o||"absolute"==o;if(!n||e){var r={paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight")};Y.css(r),t=t.wrap("<div class='"+h.floatWrapperClass+"' style='position: relative; clear:both;'></div>").parent(),M=!0}return t};B?(Q=ne(q,!0),Q.append(Y)):(Q=ne(x),x.after(Y))}else x.after(Y);Y.css({position:D?"absolute":"fixed",marginTop:0,top:D?0:"auto",zIndex:h.zIndex}),Y.addClass(h.floatContainerClass),c();var re={"table-layout":"fixed"},ie={"table-layout":x.css("tableLayout")||"auto"},le=x[0].style.width||"",ae=x.css("minWidth")||"";C();var se,fe=function(){(se=b())()};fe();var de=y(),ce=m();ce(de("init"),!0);var ue=i.debounce(function(){ce(de("windowScrollDone"),!1)},300),he=function(){ce(de("windowScroll"),!1),ue()},pe=function(){ce(de("containerScroll"),!1)},ve=function(){c(),C(),fe(),de=y(),(ce=m())(de("resize"),!0,!0)},ge=i.debounce(function(){C(),c(),fe(),de=y(),ce(de("reflow"),!0)},1);B?D?q.on(o("scroll"),pe):(q.on(o("scroll"),pe),f.on(o("scroll"),he)):f.on(o("scroll"),he),f.on(o("load"),ge),e(h.debounceResizeMs,o("resize"),ve),x.on("reflow",ge),r(x)&&x.on("filter",ge).on("sort",ge).on("page",ge),x.data("floatThead-attached",{destroy:function(){var t=".fth-"+S;v(),x.css(ie),N.remove(),a&&_.remove(),K.parent().length&&K.replaceWith(j),x.off("reflow"),q.off(t),M&&(q.length?q.unwrap():x.unwrap()),x.css("minWidth",ae),Y.remove(),x.data("floatThead-attached",!1),f.off(t)},reflow:function(){ge()},setHeaderHeight:function(){s()},getFloatContainer:function(){return Y},getRowGroups:function(){return E?Y.find("thead").add(x.find("tbody,tfoot")):x.find("thead,tbody,tfoot")}})}),this}}(jQuery),function(){$.floatThead=$.floatThead||{},$.floatThead._=window._||function(){var t={},e=Object.prototype.hasOwnProperty,o=["Arguments","Function","String","Number","Date","RegExp"];t.has=function(t,o){return e.call(t,o)},t.keys=function(e){if(e!==Object(e))throw new TypeError("Invalid object");var o=[];for(var n in e)t.has(e,n)&&o.push(n);return o};var n=0;return t.uniqueId=function(t){var e=++n+"";return t?t+e:e},$.each(o,function(){var e=this;t["is"+e]=function(t){return Object.prototype.toString.call(t)=="[object "+e+"]"}}),t.debounce=function(t,e,o){var n,r,i,l,a;return function(){i=this,r=arguments,l=new Date;var s=function(){var f=new Date-l;e>f?n=setTimeout(s,e-f):(n=null,o||(a=t.apply(i,r)))},f=o&&!n;return n||(n=setTimeout(s,e)),f&&(a=t.apply(i,r)),a}},t}()}();