/*!
 * @copyright &copy; Kartik Visweswaran, Krajee.com, 2014
 * @version 1.4.0
 *
 * A multi level dependent dropdown JQuery plugin. The plugin
 * allows nested and combined dependencies.
 * 
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(e){"use strict";var t=function(t,a){return null===t||void 0===t||0===t.length||a&&""===e.trim(t)},a=function(t,a,n,d){var i=a===d&&null!==d?{value:a,text:n,selected:"selected"}:{value:a,text:n};e("<option/>",i).appendTo(t)},n=function(t,n,d){var i=e("<select>");return n!==!1&&a(i,"",n,d),e.each(t,function(t,n){if(n.id)a(i,n.id,n.name,d);else{var o=e("<optgroup>",{label:t});e.each(n,function(e,t){a(o,t.id,t.name,d)}),o.appendTo(i)}}),i.html()},d=function(d,i,o,l,r,p,s,u,c,g,f,h){var m,v,y=0,$={depdrop_parents:l},b={};if(!t(h)){for(var x=0;x<h.length;x++)b[x]=e("#"+h[x]).val();$={depdrop_parents:l,depdrop_params:b}}v={url:i,type:"post",data:$,dataType:"json",success:function(i){m=g===!1?t(i.selected)?null:i.selected:g,t(i)?a(d,"",c,""):(d.html(n(i.output,r,m)),d.find("optgroup").length>0&&d.find('option[value=""]').attr("disabled","disabled"),0!==i.output.length&&(d.val(m),d.removeAttr("disabled"))),y=d.find("option").length,d.find('option[value=""]').length>0&&(y-=1),d.trigger("depdrop.change",[o,e("#"+o).val(),y,g])}},v.beforeSend=function(){d.trigger("depdrop.beforeChange",[o,e("#"+o).val(),g]),d.attr("disabled","disabled"),d.html(""),p&&(d.addClass(s),d.html('<option id="">'+u+"</option>"))},v.error=function(){d.trigger("depdrop.error",[o,e("#"+o).val(),g])},v.complete=function(){f(),p&&d.removeClass(s),d.trigger("depdrop.afterChange",[o,e("#"+o).val(),g])},e.ajax(v)},i=function(t,a,n){var o,l,r={},p=n[t+1],s=e("#"+a[t+1]),u=a.length;for(l=0;t>=l;l++)o=e("#"+a[l]),r[l]=o.val();u-1>t&&d(s,s.data("url"),s.attr("id"),r,s.data("placeholder"),s.data("loading"),s.data("loadingClass"),s.data("loadingText"),s.data("emptyMsg"),p,function(){i(t+1,a,n)},s.data("params"))},o=function(t,a){var n=this;n.$element=e(t),e.each(a,function(e,t){n[e]=t}),n.initData(),n.init()};o.prototype={constructor:o,initData:function(){var e=this;e.$element.data("url",e.url),e.$element.data("depends",e.depends),e.$element.data("placeholder",e.placeholder),e.$element.data("loading",e.loading),e.$element.data("loadingClass",e.loadingClass),e.$element.data("loadingText",e.loadingText),e.$element.data("emptyMsg",e.emptyMsg),e.$element.data("initialize",e.initialize),e.$element.data("params",e.params)},init:function(){var t,a=this,n=a.depends,d=a.$element,o=n.length,l={},r=d.find("option").length,p=function(e){return function(){a.setDep(e,n,o,!1)}};(0===r||d.find('option[value=""]').length===r)&&d.attr("disabled","disabled");for(var s=0;o>s;s++)t=e("#"+n[s]),t.on("change",p(t));if(a.initialize===!0){for(var u=0;o>u;u++)u>0&&(l[u]=e("#"+n[u]).val());n[o]=d.attr("id"),l[o]=d.val(),e(document).ready(function(){i(0,n,l)})}d.trigger("depdrop.init")},setDep:function(t,a,n,i){for(var o,l,r=this,p={},s=i,u=function(){r.$element.trigger("change")},c=0;n>c;c++)o=e("#"+a[c]),l=o.attr("type"),p[c]="checkbox"===l||"radio"===l?o.prop("checked"):o.val();d(r.$element,r.url,t.attr("id"),p,r.placeholder,r.loading,r.loadingClass,r.loadingText,r.emptyMsg,s,u,r.params)}},e.fn.depdrop=function(t){var a=Array.apply(null,arguments);return a.shift(),this.each(function(){var n=e(this),d=n.data("depdrop"),i="object"==typeof t&&t;d||n.data("depdrop",d=new o(this,e.extend({},e.fn.depdrop.defaults,i,e(this).data()))),"string"==typeof t&&d[t].apply(d,a)})},e.fn.depdrop.defaults={url:"",loading:!0,loadingClass:"kv-loading",loadingText:"Loading ...",placeholder:"Select ...",emptyMsg:"No data found",initialize:!1,params:{}},e.fn.depdrop.Constructor=o,e(function(){e("select.depdrop").depdrop()})}(window.jQuery);